clone:
  git:
    image: plugins/git
    depth: 1
pipeline:
  test:
    image: golang:1.10.3-alpine
    commands:
      - apk update && apk add git make
      - export BASEDIR="$(go env GOPATH)/src/github.com/ntrrg"
      - mkdir -p "$BASEDIR"
      - ln -sf "$PWD" "$BASEDIR/ntgo"
      - cd "$BASEDIR/ntgo"
      - make deps
      - make ci
